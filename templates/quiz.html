{% extends "base.html" %}
{% block title %}Quizzes | Digital Learning Platform{% endblock %}

{% block content %}
<div class="container my-5">

  <!-- Quiz Header -->
  <div class="text-center mb-4">
    <h2 class="fw-bold text-primary">{{ quiz.title }}</h2>
    <p class="text-muted fs-5">{{ quiz.description }}</p>
  </div>

  <!-- Quiz Progress -->
  {% if progress is defined %}
  <div class="mb-4">
    <div class="progress" style="height: 25px;">
      <div class="progress-bar progress-bar-striped progress-bar-animated" 
           role="progressbar" style="width: {{ progress }}%" 
           aria-valuenow="{{ progress }}" aria-valuemin="0" aria-valuemax="100">
        {{ progress }}%
      </div>
    </div>
  </div>
  {% endif %}

  <!-- Quiz Form -->
  <form method="POST" action="{{ url_for('submit_quiz', quiz_id=quiz.id) }}">
    {% for question in quiz.questions %}
    <div class="card mb-3 shadow-sm">
      <div class="card-body">
        <h5 class="card-title">Q{{ loop.index }}. {{ question.text }}</h5>

        {% for option in question.options %}
        <div class="form-check my-2">
          <input class="form-check-input" type="radio" 
                 name="question_{{ question.id }}" 
                 id="option_{{ option.id }}" value="{{ option.id }}" required>
          <label class="form-check-label" for="option_{{ option.id }}">
            {{ option.text }}
          </label>
        </div>
        {% endfor %}
      </div>
    </div>
    {% endfor %}

    <!-- Submit Button -->
    <div class="text-center">
      <button type="submit" class="btn btn-success btn-lg">
        <i class="fas fa-paper-plane"></i> Submit Quiz
      </button>
    </div>
  </form>

  <!-- Quiz Feedback -->
  {% if feedback %}
  <div class="mt-4">
    <div class="alert alert-info shadow-sm">
      <h5 class="fw-bold">Your Score: {{ feedback.score }}/{{ feedback.total }}</h5>
      <p>{{ feedback.message }}</p>
    </div>
  </div>
  {% endif %}
</div>
{% endblock %}